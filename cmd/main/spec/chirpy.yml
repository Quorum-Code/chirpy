---
openapi: 3.0.0
info:
  version: 1.0.0
  title: Chirpy
  description: Simple social media CRUD
tags:
  - name: signup
    description: Create an account
  - name: chirps
    description: Posts with text by an author
paths:
  /api/signup:
    post:
      tags:
        - signup
      consumes:
        - application/json
      parameters:
        - in: header
          name: email
          description: Account email
          type: string
          required: true
        - in: header
          name: password
          description: Account password
          type: string
          required: true
      responses:
        '200':
          description: Created the account
        '400':
          description: Failed to Create chirp
  /api/chirps:
    post:
      tags:
        - chirps
      consumes:
        - application/json
      requestBody:
        description: Create a new chirp
        content:
          application/json:
            schema:
              type: object
              properties:
                chirpBody:
                  type: string
              required:
                - body
            style: form
      responses:
        '200':
          description: Posted the chirp
        '400':
          description: Failed to post the chirp
      security:
        - chirp_auth:
          - write:chirps
components:
  securitySchemes:
    chirp_auth:
      type: oauth2
      flows:
        password:
          tokenUrl: http://localhost:8000/oauth/token
          scopes:
            write:chirps: create and modify chirps by your account
            read:chirps: read chirps
    api_key:
      type: apiKey
      name: api_key
      in: header